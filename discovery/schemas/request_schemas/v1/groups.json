{
  "name": "GroupsController",
  "source_file": "app/controllers/api/v1/groups_controller.rb",
  "namespace": "Api::V1",
  "base_path": "/api/v1/groups",
  "inherits": "RestfulController",
  "permitted_params_key": "group",
  "actions": {
    "index": {
      "method": "GET",
      "path": "/api/v1/groups",
      "description": "List groups visible to the current user, optionally filtered",
      "authentication": "optional",
      "query_parameters": {
        "xids": { "type": "string", "description": "x-separated list of group IDs to fetch" },
        "q": { "type": "string", "description": "Search query" },
        "order": {
          "type": "string",
          "enum": ["memberships_count", "memberships_count_asc", "created_at", "created_at_asc"],
          "default": "memberships_count"
        },
        "from": { "type": "integer", "description": "Pagination offset" },
        "per": { "type": "integer", "description": "Items per page", "default": 50 }
      }
    },
    "show": {
      "method": "GET",
      "path": "/api/v1/groups/:id",
      "description": "Get a single group by ID or key",
      "authentication": "required",
      "path_parameters": {
        "id": { "type": "string", "description": "Group ID or key" }
      }
    },
    "create": {
      "method": "POST",
      "path": "/api/v1/groups",
      "description": "Create a new group",
      "authentication": "required",
      "root_key": "group",
      "parameters": { "$ref": "../permitted_params.json#/attributes/group" }
    },
    "update": {
      "method": "PATCH",
      "path": "/api/v1/groups/:id",
      "description": "Update a group",
      "authentication": "required",
      "authorization": "update on Group",
      "root_key": "group",
      "path_parameters": {
        "id": { "type": "string" }
      },
      "parameters": { "$ref": "../permitted_params.json#/attributes/group" }
    },
    "destroy": {
      "method": "DELETE",
      "path": "/api/v1/groups/:id",
      "description": "Archive/delete a group",
      "authentication": "required",
      "authorization": "destroy on Group",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "token": {
      "method": "GET",
      "path": "/api/v1/groups/:id/token",
      "description": "Get the group's invitation token",
      "authentication": "required",
      "authorization": "invite_people on Group",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "reset_token": {
      "method": "POST",
      "path": "/api/v1/groups/:id/reset_token",
      "description": "Generate a new invitation token for the group",
      "authentication": "required",
      "authorization": "invite_people on Group",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "subgroups": {
      "method": "GET",
      "path": "/api/v1/groups/:id/subgroups",
      "description": "List subgroups of a group",
      "authentication": "required",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "upload_photo": {
      "method": "POST",
      "path": "/api/v1/groups/:id/upload_photo/:kind",
      "description": "Upload a logo or cover photo for the group",
      "authentication": "required",
      "authorization": "update on Group",
      "path_parameters": {
        "id": { "type": "string" },
        "kind": { "type": "string", "enum": ["logo", "cover_photo"], "required": true }
      },
      "parameters": {
        "file": { "type": "file", "required": true }
      }
    },
    "export": {
      "method": "POST",
      "path": "/api/v1/groups/:id/export",
      "description": "Export group data as JSON (async job)",
      "authentication": "required",
      "authorization": "export on Group",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "export_csv": {
      "method": "POST",
      "path": "/api/v1/groups/:id/export_csv",
      "description": "Export group data as CSV (async job)",
      "authentication": "required",
      "authorization": "export on Group",
      "path_parameters": {
        "id": { "type": "string" }
      }
    },
    "count_explore_results": {
      "method": "GET",
      "path": "/api/v1/groups/count_explore_results",
      "description": "Count public groups matching search query",
      "authentication": "optional",
      "query_parameters": {
        "q": { "type": "string", "description": "Search query" }
      }
    },
    "suggest_handle": {
      "method": "GET",
      "path": "/api/v1/groups/suggest_handle",
      "description": "Suggest a URL-friendly handle based on group name",
      "authentication": "required",
      "query_parameters": {
        "name": { "type": "string", "required": true },
        "parent_handle": { "type": "string" }
      }
    }
  }
}
