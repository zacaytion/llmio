pre-commit:
  parallel: true
  jobs:
    - name: lint go
      run: golangci-lint run --config .config/golangci.yml --fix --timeout 2m
      glob: "*.go"
      stage_fixed: true

    - name: lint files
      run: pnpm exec ls-lint -config .config/ls-lint.yml

    - name: lint markdown
      run: pnpm exec markdownlint-cli2 --fix
      glob: "*.md"
      stage_fixed: true

    - name: lint makefile
      run: go tool checkmake --config .config/checkmake.ini Makefile
      glob: "Makefile"

    - name: lint migrations
      run: mise exec -- squawk --config .config/squawk.toml migrations/*.sql
      glob: "migrations/*.sql"

commit-msg:
  commands:
    commitlint:
      run: pnpx commitlint --config .config/commitlintrc.yml --edit {1}
